#
# axle-healthcare-benchmark
#
# settings script
#
# Copyright (c) 2013, Portavita B.V.
#

#------------------------------------------------------------------------------
# DIRECTORIES
#------------------------------------------------------------------------------
CDAGENERATOR=cda-generator
CDAOUTPUT=$(CDAGENERATOR)/output
BOOTSTRAPDIR=bootstrap
LAKEDIR=lake
# the following directories are created
PERFDATADIR=perfdata
DATABASEDIR=database
PGSOURCE=$(BASEDIR)/pgsource
PGSERVER=$(BASEDIR)/pgserver
PGDATA=$(BASEDIR)/data
PGTUNE=$(BASEDIR)/pgtune

#------------------------------------------------------------------------------
# CDA GENERATOR
#------------------------------------------------------------------------------
CDAGENCONF=$(CDAGENERATOR)/src/main/resources/application.conf

# Number of documents to generate.
NUMBEROFCDAS=1000

#------------------------------------------------------------------------------
# DATABASE SERVERS AND NAMES
#------------------------------------------------------------------------------
PONDHOST=localhost
PONDPORT=5432
PONDUSER=$(USER)
PONDDBPREFIX=pond
LAKELOCALPORT=15432
LAKELOCALHOST=localhost

LAKEPORT=5432
LAKEUSER=$(USER)
LAKEDB=lake

#------------------------------------------------------------------------------
# PREPARE POSTGRESQL DATABASE CLUSTER
#------------------------------------------------------------------------------

# Use the official PostgreSQL mirror at github
PGGIT=https://github.com/postgres/postgres
PGGITDIR=$(shell basename $(PGGIT))

# PostgreSQL branch to checkout
PGBRANCH=REL9_3_STABLE

# MGRID software versions
MGRIDHDLVERSION=2.0dev
MGRIDMSGVERSION=2.0dev

# PGTune git repository
PGTUNEGIT=https://github.com/gregs1104/pgtune.git

# Options for PGTune
PGTUNEMAXCONN=$(shell expr 10 + `grep MHz /proc/cpuinfo | wc -l`)
PGTUNEDBTYPE=DW
PGTUNESYSTEMTYPE=Linux

# Add non default parameters for the pond postgresql.conf here
define NONDEFAULTPOSTGRESQLCONFPOND

#------------------------------------------------------------------------------
# Settings from default_settings NONDEFAULTPOSTGRESQLCONFPOND
#------------------------------------------------------------------------------

shared_preload_libraries = 'pg_stat_statements'
pg_stat_statements.max = 1000
pg_stat_statements.track = all
autovacuum = off
endef
export NONDEFAULTPOSTGRESQLCONFPOND

# Add non default parameters for the lake postgresql.conf here
define NONDEFAULTPOSTGRESQLCONFLAKE

#------------------------------------------------------------------------------
# Settings from default_settings NONDEFAULTPOSTGRESQLCONFLAKE
#------------------------------------------------------------------------------

shared_preload_libraries = 'pg_stat_statements'
pg_stat_statements.max = 1000
pg_stat_statements.track = all
from_collapse_limit = 12
join_collapse_limit = 12
endef
export NONDEFAULTPOSTGRESQLCONFLAKE

